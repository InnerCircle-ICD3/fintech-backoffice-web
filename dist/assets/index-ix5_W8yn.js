import{j as e,a as r}from"./index-_5xsdmz-.js";import{c as A,a as y,b as P,W as _,Q as v,a0 as S,M as je,B as p,d as f,N as U,U as H,H as Q,a1 as ye,a2 as Se,f as W,t as fe,k as ke,P as X,h as ge,A as be,l as Ne,L as Z,a3 as Ie,Z as _e}from"./App-DPRSQoot.js";import{z as n}from"./schema-UP6hwKUS.js";import{A as Ae}from"./index-DBw9mIg3.js";import{D as G,r as J,u as ee,v as se,w as ae,y as we,f as Ce,x as $}from"./index-qUdLbnZX.js";import{C as te}from"./index-3PUTLCkQ.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ce=A("copy",Pe);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Te=A("ellipsis",Ee);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ze=A("plus",Re);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ke=A("refresh-cw",De);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Me=A("trash-2",qe),F=n.object({merchantId:n.number()}),M=n.object({id:n.number(),key:n.string(),secret:n.string(),active:n.boolean(),createdAt:n.string(),expiredAt:n.string()}),Be=n.array(M),Le=n.object({merchantId:n.number(),currentKey:n.string()});n.object({success:n.boolean(),message:n.string()});n.object({currentKey:n.string()});const He=n.object({key:n.string()}),D={get:y({path:"/merchants/api-keys/:merchantId",method:"get",requestSchema:F,responseSchema:Be,apiInstance:P}),create:y({path:"/merchants/api-keys/:merchantId",method:"post",requestSchema:F,responseSchema:M,apiInstance:P}),reissue:y({path:"/merchants/api-keys/:merchantId/reissue",method:"post",requestSchema:Le,responseSchema:M,apiInstance:P}),delete:y({path:"/merchants/api-keys/:key",method:"delete",requestSchema:He,responseSchema:n.object({status:n.number()}),apiInstance:P})},$e=n.object({sdkKey:n.string()}),Fe=n.object({success:n.boolean(),message:n.string()}),Oe=n.object({success:n.boolean(),message:n.string()}),B={get:y({path:"/sdk-key",method:"get",responseSchema:$e}),activate:y({path:"/sdk-key/activate",method:"post",responseSchema:Fe}),deactivate:y({path:"/sdk-key/deactivate",method:"post",responseSchema:Oe})};var Ye="_1175d9e0",Ve="_1175d9e1",Ue="_1175d9e3",Qe="_1175d9e4",O="_1175d9e5",Y="_1175d9e6",We="i0d1il1",Xe="i0d1il2",Ze="i0d1il3",q="i0d1il4";const Ge=({isOpen:s,onRequestClose:t,merchantInfo:a})=>{const{mutate:i}=_({mutationKey:[v.API_KEYS.CREATE],mutationFn:()=>D.create(void 0,{merchantId:String(a.merchantId)}),onSuccess:()=>{S.success("API 키가 생성되었습니다."),t()},meta:{invalidates:[v.API_KEYS.LIST]}});return e.jsx(G,{open:s,onOpenChange:t,children:e.jsxs(J,{style:{width:"460px"},children:[e.jsxs(ee,{children:[e.jsx(se,{children:"API 키 발급"}),e.jsx(ae,{children:"새로운 API 키를 발급하시겠어요? 발급된 키는 다시 발급할 수 없어요."}),e.jsxs("div",{className:We,children:[e.jsxs("h2",{className:Xe,children:[e.jsx(je,{size:16}),"주의 사항"]}),e.jsxs("ul",{className:Ze,children:[e.jsx("li",{className:q,children:"API 키는 발급 후 즉시 사용 가능합니다."}),e.jsx("li",{className:q,children:"Secret 키는 최초 발급 시에만 확인 가능합니다."}),e.jsx("li",{className:q,children:"발급 후 반드시 안전한 곳에 보관하세요."})]})]})]}),e.jsxs(we,{children:[e.jsx(p,{variant:"secondary",onClick:t,children:"취소"}),e.jsx(p,{variant:"primary",onClick:()=>i(),children:"발급하기"})]})]})})};var Je="_1sgzvr50",E="_1sgzvr51",T="_1sgzvr52",R="_1sgzvr53",es="_1sgzvr54",ss="_1sgzvr55",as="_1sgzvr56",V="_1sgzvr57";const ts=({apiKey:s,isOpen:t,onRequestClose:a,onReissue:i,onDelete:o})=>{const h=l=>Ce(new Date(l),"yyyy/MM/dd");return e.jsx(G,{open:t,onOpenChange:a,children:e.jsxs(J,{style:{width:"460px"},children:[e.jsxs(ee,{children:[e.jsx(se,{children:"API 키 상세 정보"}),e.jsx(ae,{children:"API 키의 상세 정보를 확인할 수 있습니다."})]}),e.jsxs("div",{className:Je,children:[e.jsxs("div",{className:E,children:[e.jsx("span",{className:T,children:"ID"}),e.jsx("span",{className:R,children:s.id})]}),e.jsxs("div",{className:E,children:[e.jsx("span",{className:T,children:"상태"}),e.jsx("span",{className:`${R} ${s.active?es:ss}`,children:s.active?"활성":"비활성"})]}),e.jsxs("div",{className:E,children:[e.jsx("span",{className:T,children:"생성일"}),e.jsx("span",{className:R,children:h(s.createdAt)})]}),e.jsxs("div",{className:E,children:[e.jsx("span",{className:T,children:"만료일"}),e.jsx("span",{className:R,children:h(s.expiredAt)})]})]}),e.jsxs("div",{className:as,children:[e.jsxs(p,{variant:"secondary",onClick:()=>{i(s.id),a()},className:V,children:[e.jsx(Ke,{size:16}),"재발급"]}),e.jsxs(p,{variant:"destructive",onClick:()=>{o(s.id),a()},className:V,children:[e.jsx(Me,{size:16}),"삭제"]})]})]})})};var cs="_5qp8sw0",ns="_5qp8sw1",rs="_5qp8sw2",is="_5qp8sw3",os="_5qp8sw4",ls="_5qp8sw5",ds="_5qp8sw6";const ne=r.forwardRef(({className:s,...t},a)=>e.jsx("div",{className:cs,children:e.jsx("table",{ref:a,className:f(ns,s),...t})}));ne.displayName="Table";const re=r.forwardRef(({className:s,...t},a)=>e.jsx("thead",{ref:a,className:f(rs,s),...t}));re.displayName="TableHeader";const ie=r.forwardRef(({className:s,...t},a)=>e.jsx("tbody",{ref:a,className:f(is,s),...t}));ie.displayName="TableBody";const z=r.forwardRef(({className:s,...t},a)=>e.jsx("tr",{ref:a,className:f(os,s),...t}));z.displayName="TableRow";const I=r.forwardRef(({className:s,...t},a)=>e.jsx("th",{ref:a,className:f(ls,s),...t}));I.displayName="TableHead";const k=r.forwardRef(({className:s,...t},a)=>e.jsx("td",{ref:a,className:f(ds,s),...t}));k.displayName="TableCell";const hs=({apiKeyList:s})=>{const t=U(),[a,i]=r.useState({}),{openOverlay:o}=H(),{openOverlay:h}=H(),l=async c=>{await navigator.clipboard.writeText(c),S.success("API 키가 복사되었습니다.")},m=c=>{i(d=>({...d,[c]:!d[c]}))},x=(c,d)=>{if(d)return c;const j=8,b=c.slice(0,j),N=c.slice(j).replace(/[^_]/g,"•");return b+N},{mutate:g}=_({mutationKey:[v.API_KEYS.REISSUE],mutationFn:c=>D.reissue(void 0,{merchantId:String(t.merchantId),currentKey:c}),onSuccess:()=>{S.success("API 키가 재발급되었습니다.")},meta:{invalidates:[v.API_KEYS.LIST]}}),{mutate:u}=_({mutationKey:[v.API_KEYS.DELETE],mutationFn:c=>D.delete(void 0,{key:c}),onSuccess:()=>{S.success("API 키가 삭제되었습니다.")},meta:{invalidates:[v.API_KEYS.LIST]}});return e.jsxs(Q,{className:Ye,children:[e.jsx(te,{title:"API 개별 연동 키",description:"결제 시스템과 연동하기 위한 API 키를 관리합니다.",action:e.jsx("div",{className:Ue,children:e.jsxs(p,{variant:"primary",className:Qe,onClick:()=>o(c=>e.jsx(Ge,{...c,merchantInfo:t})),children:[e.jsx(ze,{size:16}),"API 키 발급"]})})}),e.jsx("div",{className:Ve,children:e.jsxs(ne,{children:[e.jsx(re,{children:e.jsxs(z,{children:[e.jsx(I,{children:"ID"}),e.jsx(I,{children:"API 키"}),e.jsx(I,{children:"Secret 키"}),e.jsx(I,{style:{textAlign:"center"},children:"작업"})]})}),e.jsx(ie,{children:s.length>0?s.map(c=>e.jsxs(z,{children:[e.jsx(k,{children:c.id}),e.jsx(k,{children:e.jsxs("div",{className:O,children:[e.jsx("span",{children:c.key}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>l(c.key),className:Y,children:e.jsx(ce,{size:16})})]})}),e.jsx(k,{children:e.jsxs("div",{className:O,children:[e.jsx("span",{children:x(c.secret,a[c.id])}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>m(c.id),className:Y,children:a[c.id]?e.jsx(ye,{size:16}):e.jsx(Se,{size:16})})]})}),e.jsx(k,{children:e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>h(d=>e.jsx(ts,{...d,apiKey:c,onReissue:()=>g(c.key),onDelete:()=>u(c.key)})),children:e.jsx(Te,{size:16})})})]},c.id)):e.jsx(z,{children:e.jsx(k,{colSpan:4,style:{textAlign:"center"},children:"발급된 API 키가 없습니다."})})})]})})]})};var K="Switch",[ms,Ds]=ke(K),[ps,us]=ms(K),oe=r.forwardRef((s,t)=>{const{__scopeSwitch:a,name:i,checked:o,defaultChecked:h,required:l,disabled:m,value:x="on",onCheckedChange:g,form:u,...c}=s,[d,j]=r.useState(null),b=W(t,C=>j(C)),N=r.useRef(!1),L=d?u||!!d.closest("form"):!0,[w,ve]=fe({prop:o,defaultProp:h??!1,onChange:g,caller:K});return e.jsxs(ps,{scope:a,checked:w,disabled:m,children:[e.jsx(X.button,{type:"button",role:"switch","aria-checked":w,"aria-required":l,"data-state":me(w),"data-disabled":m?"":void 0,disabled:m,value:x,...c,ref:b,onClick:ge(s.onClick,C=>{ve(xe=>!xe),L&&(N.current=C.isPropagationStopped(),N.current||C.stopPropagation())})}),L&&e.jsx(he,{control:d,bubbles:!N.current,name:i,value:x,checked:w,required:l,disabled:m,form:u,style:{transform:"translateX(-100%)"}})]})});oe.displayName=K;var le="SwitchThumb",de=r.forwardRef((s,t)=>{const{__scopeSwitch:a,...i}=s,o=us(le,a);return e.jsx(X.span,{"data-state":me(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t})});de.displayName=le;var vs="SwitchBubbleInput",he=r.forwardRef(({__scopeSwitch:s,control:t,checked:a,bubbles:i=!0,...o},h)=>{const l=r.useRef(null),m=W(l,h),x=be(a),g=Ne(t);return r.useEffect(()=>{const u=l.current;if(!u)return;const c=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(c,"checked").set;if(x!==a&&j){const b=new Event("click",{bubbles:i});j.call(u,a),u.dispatchEvent(b)}},[x,a,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:m,style:{...o.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});he.displayName=vs;function me(s){return s?"checked":"unchecked"}var pe=oe,xs=de,js=Z({defaultClassName:"_1myt0jc0",variantClassNames:{size:{sm:"_1myt0jc1",md:"_1myt0jc2",lg:"_1myt0jc3"}},defaultVariants:{size:"md"},compoundVariants:[]}),ys=Z({defaultClassName:"_1myt0jc4",variantClassNames:{size:{sm:"_1myt0jc5",md:"_1myt0jc6",lg:"_1myt0jc7"}},defaultVariants:{size:"md"},compoundVariants:[]});const ue=r.forwardRef(({className:s,size:t,...a},i)=>e.jsx(pe,{className:f(js({size:t}),s),...a,ref:i,children:e.jsx(xs,{className:ys({size:t}),style:{transform:a.checked?"translateX(100%)":"translateX(0)"}})}));ue.displayName=pe.displayName;var Ss="v34xdq0",fs="v34xdq1",ks="v34xdq2",gs="v34xdq3",bs="v34xdq4",Ns="v34xdq9",Is="v34xdqa",_s="v34xdqb",As="v34xdqc";const ws=({sdkKey:s})=>{const[t,a]=r.useState(!0),{mutate:i}=_({mutationFn:()=>B.activate(),onSuccess:()=>{a(!0),S.success("SDK 키가 활성화되었습니다.")}}),{mutate:o}=_({mutationFn:()=>B.deactivate(),onSuccess:()=>{a(!1),S.success("SDK 키가 비활성화되었습니다.")}}),h=async()=>{await navigator.clipboard.writeText(s),S.success("SDK 키가 복사되었습니다.")},l=m=>{m?i():o()};return e.jsxs(Q,{className:Ss,children:[e.jsx(te,{title:"결제위젯 연동 키",description:"결제 위젯으로 연동할 때 사용하는 SDK 키에요. 회원가입 시 자동으로 발급돼요."}),e.jsx("div",{className:fs,children:e.jsxs("div",{className:ks,children:[e.jsx(Ie,{children:"SDK 키"}),e.jsxs("div",{className:gs,children:[e.jsx(_e,{value:s,readOnly:!0,suffix:e.jsx(p,{variant:"ghost",size:"sm",onClick:h,children:e.jsx(ce,{size:16})}),className:bs}),e.jsxs("div",{className:Ns,children:[e.jsx("div",{className:`${Is} ${t?_s:As}`,children:t?"활성":"비활성"}),e.jsx(ue,{size:"lg",checked:t,onCheckedChange:l,"aria-label":"SDK 키 상태 토글"})]})]})]})})]})},Ks=()=>{const s=U(),{data:{sdkKey:t}}=$({queryKey:v.SDK.KEY,queryFn:()=>B.get()}),{data:a}=$({queryKey:v.API_KEYS.LIST,queryFn:()=>D.get(void 0,{merchantId:String(s.merchantId)})});return e.jsxs(Ae,{label:"API 키",children:[e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ws,{sdkKey:t})}),e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(hs,{apiKeyList:a})})]})};export{Ks as default};
