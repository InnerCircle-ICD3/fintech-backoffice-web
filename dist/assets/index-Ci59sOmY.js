import{j as e,a as I}from"./index-BC6ZqUps.js";import{A as _}from"./index-G2h_bwmS.js";import{c as g,M as A,N as C,O as k,S,U as M,V as q,E,B as p,Q as i,A as T,D as B,G as P,F as l,t as d,W as m,v as u,X as h,w as x,Y as Q,Z as O,_ as H}from"./App-BMBn2WKP.js";import{C as F}from"./index-DWk-VP3O.js";import{z as o}from"./schema-AkqpuqDV.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],$=g("pencil",R);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],D=g("trash",z);var L="e1q8yf0",V="e1q8yf1",K="e1q8yf2",W="e1q8yf3",j="e1q8yf4",U="e1q8yf5",Y="e1q8yf6";const w=()=>{const a=A(),s=C(),{openConfirmation:n}=k(),t=S(),{mutate:c,isPending:N}=M({mutationFn:()=>q.delete(),onSuccess:()=>{t(),s.invalidateQueries({predicate:()=>!0}),a("/auth/login")}}),v=()=>{n({title:"가맹점 탈퇴 하시겠습니까?",body:"가맹점 탈퇴 시 모든 결제 정보와 정산 내역이 삭제됩니다.",actionButtonText:"확인",cancelButtonText:"취소",onSubmit:()=>c()})};return e.jsxs(E,{className:L,children:[e.jsx(F,{title:"가맹점 탈퇴",description:"가맹점 계정을 삭제하고 서비스 이용을 중단합니다."}),e.jsxs("div",{className:V,children:[e.jsx("div",{className:K,children:e.jsxs("ul",{className:W,children:[e.jsx("li",{className:j,children:"가맹점 탈퇴 시 모든 결제 정보와 정산 내역이 삭제됩니다."}),e.jsx("li",{className:j,children:"발급된 API 키와 SDK 키는 즉시 비활성화됩니다."}),e.jsx("li",{className:j,children:"진행 중인 정산이 있는 경우 정산 완료 후 탈퇴가 가능합니다."}),e.jsx("li",{className:j,children:"탈퇴 후 데이터는 복구할 수 없습니다."})]})}),e.jsx("div",{className:U,children:e.jsx(p,{width:"fit",variant:"destructive",onClick:()=>v(),disabled:N,children:e.jsxs("div",{className:Y,children:[e.jsx(D,{size:16}),"가맹점 탈퇴"]})})})]})]})},G=o.object({name:o.string({required_error:"이름을 입력해주세요."}).trim().min(2,"이름은 최소 2자 이상이어야 해요.").max(20,"이름은 최대 20자까지 가능해요."),businessNumber:o.string({required_error:"사업자등록번호를 입력해주세요."}).regex(/^[0-9]{3}-[0-9]{2}-[0-9]{5}$/,"사업자등록번호 형식이 올바르지 않습니다."),contactName:o.string({required_error:"담당자 이름을 입력해주세요."}).trim().min(2,"담당자 이름은 최소 2자 이상이어야 해요.").max(20,"담당자 이름은 최대 20자까지 가능해요.").regex(/^[가-힣a-zA-Z\s]+$/,"담당자 이름은 한글과 영문만 입력 가능합니다."),contactEmail:o.string({required_error:"담당자 이메일을 입력해주세요."}).email("올바른 이메일 형식이 아닙니다.").max(50,"이메일은 최대 50자까지 가능합니다."),contactPhone:o.string({required_error:"담당자 전화번호를 입력해주세요."}).regex(/^01([0|1|6|7|8|9])-?([0-9]{3,4})-?([0-9]{4})$/,"올바른 휴대폰 번호 형식이 아닙니다. (예: 010-1234-5678)")}),Z=a=>{const s=C();return M({mutationFn:n=>q.update(n),onMutate:async n=>{await s.cancelQueries({queryKey:i.MERCHANT.INFO});const t=s.getQueryData(i.MERCHANT.INFO);return s.setQueryData(i.MERCHANT.INFO,c=>({...c,name:n.name,businessNumber:n.businessNumber,contact:{name:n.contactName,email:n.contactEmail,phone:n.contactPhone}})),{previousData:t}},onError:(n,t,c)=>{s.setQueryData(i.MERCHANT.INFO,c==null?void 0:c.previousData)},onSuccess:a,onSettled:()=>{s.refetchQueries({queryKey:i.MERCHANT.INFO})}})};var X="p9qcg30",J="p9qcg32",ee="p9qcg33",se="p9qcg34",ne="p9qcg35",ae="p9qcg36";const te=({onCancel:a,isSubmitting:s,isValid:n})=>e.jsxs("div",{className:ne,children:[e.jsx(p,{type:"button",variant:"secondary",onClick:a,disabled:s,children:"취소"}),e.jsx(p,{type:"submit",variant:"primary",disabled:!n||s,children:s?"저장 중...":"저장"})]}),re=({onClick:a})=>e.jsx(p,{width:"fit",variant:"primary",onClick:a,children:e.jsxs("div",{className:ae,children:[e.jsx($,{size:16}),"정보 수정"]})}),f={EditButtons:te,ModifyButton:re},ce=({merchantInfo:a})=>{const[s,n]=I.useState(!1),t=T({resolver:B(G),mode:"all",defaultValues:{name:a.name,businessNumber:a.businessNumber,contactName:a.contact.name,contactEmail:a.contact.email,contactPhone:a.contact.phone}}),{mutate:c,isPending:N}=Z(()=>{n(!1)}),v=()=>{n(!1)};return e.jsxs(E,{className:X,children:[e.jsx(F,{title:"기본 정보",description:"가맹점의 기본 정보를 확인할 수 있습니다."}),e.jsx("div",{className:J,children:e.jsx(P,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(r=>c(r)),children:[e.jsxs("div",{className:ee,children:[e.jsx(l,{control:t.control,name:"name",render:({field:r})=>e.jsxs(d,{children:[e.jsx(m,{children:"가맹점명"}),e.jsx(u,{children:e.jsx(h,{...r,disabled:!s})}),e.jsx(x,{})]})}),e.jsx(l,{control:t.control,name:"businessNumber",render:({field:r})=>e.jsxs(d,{children:[e.jsx(m,{children:"사업자등록번호"}),e.jsx(u,{children:e.jsx(h,{...r,disabled:!s,maxLength:12,onChange:b=>{const y=Q(b.target.value);r.onChange(y)}})}),e.jsx(x,{})]})}),e.jsx(l,{control:t.control,name:"contactName",render:({field:r})=>e.jsxs(d,{children:[e.jsx(m,{children:"담당자명"}),e.jsx(u,{children:e.jsx(h,{...r,disabled:!s})}),e.jsx(x,{})]})}),e.jsx(l,{control:t.control,name:"contactEmail",render:({field:r})=>e.jsxs(d,{children:[e.jsx(m,{children:"담당자 이메일"}),e.jsx(u,{children:e.jsx(h,{...r,type:"email",disabled:!s})}),e.jsx(x,{})]})}),e.jsx(l,{control:t.control,name:"contactPhone",render:({field:r})=>e.jsxs(d,{children:[e.jsx(m,{children:"담당자 연락처"}),e.jsx(u,{children:e.jsx(h,{...r,disabled:!s,maxLength:13,onChange:b=>{const y=O(b.target.value);r.onChange(y)}})}),e.jsx(x,{})]})})]}),e.jsx("div",{className:se,children:s?e.jsx(f.EditButtons,{onCancel:v,isSubmitting:N,isValid:t.formState.isValid}):e.jsx(f.ModifyButton,{onClick:()=>n(!0)})})]})})})]})},ue=()=>{const a=H();return e.jsxs(_,{label:"가맹점 정보",children:[e.jsx(ce,{merchantInfo:a}),e.jsx(w,{})]})};export{ue as default};
